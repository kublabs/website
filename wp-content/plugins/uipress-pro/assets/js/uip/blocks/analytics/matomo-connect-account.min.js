const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{inject:["uipData","uipress","uiTemplate"],props:{translations:Object,success:Function},data:function(){return{hover:!1,strings:{conntectAccount:__("Connect matomo account","uipress-pro"),matomoURL:__("Matomo URL","uipress-pro"),siteID:__("Site id","uipress-pro"),authToken:__("Auth token","uipress-pro"),connect:__("Connect","uipress-pro")},data:{url:"",siteID:1,authToken:""}}},mounted:function(){},computed:{returnAccountOnUser(){return void 0!==this.uiTemplate.globalSettings.options&&("analytics"in this.uiTemplate.globalSettings.options&&"saveAccountToUser"in this.uiTemplate.globalSettings.options.analytics&&this.uiTemplate.globalSettings.options.analytics.saveAccountToUser)}},methods:{uip_save_matomo(){let t=this;if(!this.data.url||!this.data.siteID||!this.data.authToken)return void t.uipress.notify(__("All fields are required","uipress-pro"),__("Please fill in all fields to connect to matomo","uipress-pro"),"error",!0);let e=new FormData;e.append("action","uip_save_matomo_analytics"),e.append("security",uip_ajax.security),e.append("analytics",JSON.stringify(t.data)),e.append("saveAccountToUser",t.returnAccountOnUser),t.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{e.error?t.uipress.notify(__("Unable to save account","uipress-pro"),e.message,"error",!0):t.success()})}},template:'\n\t<drop-down dropPos="bottom-left">\n  \n      <template v-slot:trigger>\n        <button class="uip-button-default">{{strings.conntectAccount}}</button>\n      </template>\n      \n      <template v-slot:content>\n        <div class="uip-padding-s uip-flex uip-flex-column uip-gap-s uip-w-300">\n          <div class="uip-grid-col-1-3">\n          \n            <div class="uip-text-muted uip-flex uip-flex-center">{{strings.matomoURL}}</div>\n            <input class="uip-input uip-input-small" type="text" placeholder="https://uipress.co/analytics/" v-model="data.url">\n            \n            <div class="uip-text-muted uip-flex uip-flex-center">{{strings.siteID}}</div>\n            <input class="uip-input uip-input-small" type="number" v-model="data.siteID">\n            \n            <div class="uip-text-muted uip-flex uip-flex-center">{{strings.authToken}}</div>\n            <input class="uip-input uip-input-small" type="password" placeholder="*************" v-model="data.authToken">\n            \n          </div>\n          \n          <button class="uip-button-primary" @click="uip_save_matomo()">{{strings.connect}}</button>\n        </div>\n      </template>\n      \n    </drop-down>\n  '}};