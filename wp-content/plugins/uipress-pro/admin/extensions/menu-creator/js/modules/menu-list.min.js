const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{data:function(){return{menus:[],page:1,totalPages:0,totalFound:0,loading:!1,initialLoading:!0,selectAll:!1,search:"",strings:{status:__("Status","uipress-pro"),forRoles:__("Roles and users","uipress-pro"),excludes:__("Excludes","uipress-pro"),modified:__("Modified","uipress-pro"),name:__("Name","uipress-pro"),type:__("Type","uipress-pro"),active:__("Active","uipress-pro"),draft:__("Draft","uipress-pro"),results:__("results","uipress-pro"),searchTemplates:__("Search templates","uipress-pro"),templateDuplicated:__("Template duplicated","uipress-pro"),templateDeleted:__("Template deleted","uipress-pro"),deleteSelected:__("Delete selected","uipress-pro"),menuCreator:__("Menu Builder","uipress-pro"),newMenu:__("New menu","uipress-pro"),welcomeTotheUibuilder:__("It's a little quiet!","uipress-pro"),welcomeMeta:__("Create a new menu to get started with menu creator","uipress-pro"),viewDocs:__("View docs","uipress-pro"),editTemplate:__("Edit","uipress-pro"),duplicateTemplate:__("Duplicate","uipress-pro"),exportTemplate:__("Export","uipress-pro"),importTemplate:__("Import","uipress-pro"),deleteTemplate:__("Delete","uipress-pro"),version:__("version","uipress-pro"),tools:__("Tools","uipress-pro"),settings:__("Site settings","uipress-pro"),phpErrorLog:__("PHP error log","uipress-pro"),roleEditor:__("Role editor","uipress-pro"),pro:__("pro","uipress-pro"),uiTemplate:__("Ui Template","uipress-pro"),adminPage:__("Admin page","uipress-pro"),loginPage:__("Login page","uipress-pro"),frontEndToolbar:__("Frontend toolbar","uipress-pro"),setupWizard:__("Setup wizard","uipress-pro"),exportSelected:__("Export selected","uipress-pro"),uploadMenus:__("Import menus","uipress-pro")},activeTableTab:"all"}},inject:["router","uipress"],provide(){return{refreshList:this.getMenus}},mounted:function(){let t=this.$route.query;t&&(t.page&&(this.page=parseInt(t.page)),t.search&&(this.search=t.search)),this.getMenus()},watch:{search:{handler(t,e){this.page=1,this.pushQueries(),this.getMenus()},deep:!0},selectAll:{handler(t,e){this.selectAllItems(t)},deep:!0}},computed:{returnTableData(){return this.menus},returnPage(){return this.page},returnSelected(){let t=this,e=0;for(const i of t.menus)i.selected&&(e+=1);return e},returnSelectedIDs(){let t=this,e=[];for(const i of t.menus)i.selected&&e.push(i.id);return JSON.stringify(e)}},methods:{selectAllItems(t){let e=this;for(const i of e.menus)i.selected=t},pushQueries(){this.$router.push({query:{search:this.search,page:this.page}})},getMenus(){let t=this;if(1==t.loading)return;t.loading=!0;let e=new FormData;e.append("action","uipress_get_menus"),e.append("security",uip_ajax.security),e.append("page",t.returnPage),e.append("search",t.search),t.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{if(e.error)return t.uipress.notify(e.message,"","error",!0),t.loading=!1,void(t.initialLoading=!1);t.menus=e.menus,t.totalPages=e.totalPages,t.totalFound=e.totalFound,t.loading=!1,t.initialLoading=!1})},duplicateTemplate(t){let e=this,i=new FormData;i.append("action","uip_duplicate_admin_menu"),i.append("security",uip_ajax.security),i.append("id",t),e.uipress.callServer(uip_ajax.ajax_url,i).then(t=>{t.error?e.uipress.notify(t.message,"","error",!0):(e.uipress.notify(e.strings.templateDuplicated,"","success",!0),e.getMenus())})},deleteTemplate(t){let e=this,i=new FormData;i.append("action","uip_delete_admin_menus"),i.append("security",uip_ajax.security),i.append("menuids",t),e.uipress.callServer(uip_ajax.ajax_url,i).then(t=>{t.error?e.uipress.notify(t.message,"","error",!0):(e.uipress.notify(t.message,"","warning",!0),e.getMenus())})},exportTemplate(t){let e=this;e.loading=!0;let i=new FormData;i.append("action","uipress_get_menu"),i.append("security",uip_ajax.security),i.append("id",t),e.uipress.callServer(uip_ajax.ajax_url,i).then(t=>{if(t.error)return e.uipress.notify(t.message,"","error",!0),void(e.loading=!1);let i={};i.uipmenus=[t.menuOptions],e.exportToJson(i),e.loading=!1})},exportMultiple(t){let e=this;e.loading=!0;let i=new FormData;i.append("action","uipress_get_menus_for_export"),i.append("security",uip_ajax.security),i.append("ids",t),e.uipress.callServer(uip_ajax.ajax_url,i).then(t=>{if(t.error)return e.uipress.notify(t.message,"","error",!0),void(e.loading=!1);let i={};i.uipmenus=t.menus,e.exportToJson(i),e.loading=!1})},exportToJson(t){self=this;let e=JSON.stringify(t),i=new Date,s=String(i.getDate()).padStart(2,"0"),p="UiPress menu export-"+(String(i.getMonth()+1).padStart(2,"0")+"-"+s+"-"+i.getFullYear())+".json",n="data:text/json;charset=utf-8,"+encodeURIComponent(e),r=document.getElementById("uip-menu-export");r.setAttribute("href",n),r.setAttribute("download",p),r.click(),self.uipress.notify(__("Menu exported","uipress-lite"),"","success",!0)},createNewMenu(){let t=this,e=new FormData;e.append("action","uip_create_new_admin_menu"),e.append("security",uip_ajax.security),t.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{t.router.push("/menucreator/"+e.id+"/"),t.getMenus()})},confirmDelete(t){let e=this;e.uipress.confirm(__("Are you sure you want to delete this menu?","uipress-pro"),__("Deleted menus can't be recovered","uipress-pro"),__("Delete","uipress-pro")).then(i=>{i&&e.deleteTemplate(t)})},confirmDeleteMultiple(t){let e=this;e.uipress.confirm(__("Are you sure you want to multiple menus?","uipress-pro"),__("Deleted menus can't be recovered","uipress-pro"),__("Delete","uipress-pro")).then(i=>{i&&e.deleteTemplate(t)})},editLayout(t){this.router.push("/menucreator/"+t+"/")},goBack(){this.page>1&&(this.page=this.page-1,this.pushQueries(),this.getMenus())},goForward(){this.page<this.totalPages&&(this.page=this.page+1,this.pushQueries(),this.getMenus())},componentExists(t){return!!this.$root._.appContext.components[t]},generateVal:t=>(console.log(t),"draft"==t?(console.log("this should be off"),!1):(console.log("this is on"),!0)),updateItemStatus(t){let e=this;"publish"==t.status?t.status="draft":t.status="publish";let i=new FormData;i.append("action","uip_update_menu_status"),i.append("security",uip_ajax.security),i.append("templateid",t.id),i.append("status",t.status),e.uipress.callServer(uip_ajax.ajax_url,i).then(t=>{t.error?e.uipress.notify(t.message,"","error",!0):e.uipress.notify(t.message,"","success",!0)})},importMenus(){let t=this,e=t.uipress.notify(__("Importing menus","uipress-lite"),"","default",!1,!0),i=document.getElementById("uip-import-menu").files[0];if("application/json"!=i.type)return t.uipress.notify("Import file must be in valid JSON format","","error",!0,!1),void t.uipress.destroy_notification(e);if(i.size>1e6)return t.uipress.notify("Uploaded file is too big","","error",!0,!1),void t.uipress.destroy_notification(e);let s=new FileReader;s.readAsText(i,"UTF-8"),s.onload=function(i){let s,p=i.target.result;try{s=JSON.parse(p)}catch(i){return t.uipress.notify(i,"","error",!0,!1),void t.uipress.destroy_notification(e)}if(null!=s){if(!("uipmenus"in s))return t.uipress.notify("Template is not valid","","error",!0,!1),void t.uipress.destroy_notification(e);if(!Array.isArray(s.uipmenus))return t.uipress.notify("Template is not valid","","error",!0,!1),void t.uipress.destroy_notification(e);t.importMenusFromArray(s.uipmenus,e)}else t.uipress.notify("JSON parse failed","","error",!0,!1),t.uipress.destroy_notification(e)}},importMenusFromArray(t,e){let i=this;i.saving=!0;let s=JSON.stringify(t,(t,e)=>"true"===e?"uiptrue":!0===e?"uiptrue":"false"===e?"uipfalse":!1===e?"uipfalse":""===e?"uipblank":e),p=new FormData;p.append("action","uipress_save_menus_from_import"),p.append("security",uip_ajax.security),p.append("menus",s),i.uipress.callServer(uip_ajax.ajax_url,p).then(t=>{t.error?i.uipress.notify(t.message,"","error",!0):(i.uipress.notify(__("Menus imported succesfully","uipress-pro"),"","success",!0),i.saving=!1,i.uipress.destroy_notification(e),i.getMenus())})}},template:'\n\t\n\t\n  \t<div class="uip-padding-m uip-background-default uip-body-font uip-text-normal uip-app-frame uip-border-box uip-overflow-auto" style="min-height: calc(100vh - 32px); max-height: calc(100vh - 32px)">\n\t  \n\t  \t<router-view :key="$route.path"></router-view>\n\n\t\t  \n\t\t  \n\t\t  <div class="uip-flex uip-flex-between uip-margin-bottom-l uip-flex-center uip-padding-xs">\n\t  \t\t<div class="uip-flex uip-flex-row uip-gap-s uip-flex-center">\n\t\t\t\t<div class="uip-w-32 uip-ratio-1-1 uip-logo"></div>\n\t\t\t  \t<div class="uip-flex uip-flex-column uip-row-gap-xxs">\n\t\t\t\t\n\t\t  \t\t\t<span class="uip-text-xl uip-text-bold uip-text-emphasis">{{strings.menuCreator}}</span>\n\t\t\t\t\n\t\t\t\t</div>\n\t  \t\t</div>\n   \t\t</div>\n\t\n\t\t\n\t\t\t\t  \n\t\t\x3c!--EMPTY--\x3e\n\t\t<div v-if="returnTableData.length == 0 && !loading && search == \'\'" class="uip-flex uip-flex-center uip-flex-middle uip-padding-top-l">\n\t\t\t  <div class="uip-flex uip-flex-column uip-row-gap-s uip-flex-start uip-max-w-100p">\n\t\t\t\t<div class="uip-w-60 uip-ratio-1-1 uip-logo"></div>\n\t\t\t\t\n\t\t\t\t<div class="uip-text-emphasis uip-text-bold uip-text-xxl">{{strings.welcomeTotheUibuilder}}</div>\n\t\t\t\t<div class="uip-text-l uip-w-400 uip-text-muted">{{strings.welcomeMeta}}</div>\n\t\t\t\t\n\t\t\t\t<div class="uip-flex uip-flex-row uip-gap-s uip-flex-center uip-margin-top-s">\n\t\t\t\t\t  <div class="uip-button-primary" @click="createNewMenu">{{strings.newMenu}}</div>\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t</div>  \n\t\t\n\t\t\n\t\t\x3c!--LIST--\x3e\n\t\t<template v-else>\n\t\t\n\t \t\t<div class="uip-margin-bottom-s uip-flex uip-flex-row uip-gap-s uip-flex-center">\n\t \t\t\n\t   \t\t\t<div class="uip-flex uip-padding-xxs uip-search-block uip-border-round uip-flex-grow uip-margin-left-xs hover:uip-background-muted">\n\t\t  \t\t\t<span class="uip-icon uip-text-muted uip-margin-right-xs uip-text-l uip-icon-medium" style="font-size:20px;">search</span> \n\t\t  \t\t\t<input class="uip-blank-input uip-flex-grow" type="search" v-model="search" :placeholder="strings.searchTemplates" autofocus="">\n\t   \t\t\t</div>\n\t   \t\t\t\n\t   \t\t\t<div v-if="returnSelected > 0">\n\t\t\t  \t\t\t<button @click="confirmDeleteMultiple(returnSelectedIDs)" class="uip-button-danger" >{{strings.deleteSelected}} (<strong>{{returnSelected}}</strong>)</button>\n\t\t  \t\t</div>\n          \n          <div v-if="returnSelected > 0">\n              <button @click="exportMultiple(returnSelectedIDs)" class="uip-button-default" >{{strings.exportSelected}} (<strong>{{returnSelected}}</strong>)</button>\n          </div>\n\t   \t\t\t\n\t   \t\t\t<div class="uip-button-primary uip-flex uip-flex-row uip-gap-xxs uip-flex-center" @click="createNewMenu">\n\t\t\t\t\t\t<span class="uip-icon">add</span>\n\t\t\t\t\t\t<span>{{strings.newMenu}}</span>\n\t\t\t\t  </div>\n          \n          <uip-tooltip :message="strings.uploadMenus">\n            <label>\n              <div class="uip-button-default uip-flex uip-flex-row uip-gap-xxs uip-flex-center">\n                <span class="uip-icon">file_upload</span>\n              </div>\n              <input hidden accept=".json" type="file" single="" id="uip-import-menu" @change="importMenus()">\n            </label>\n          </uip-tooltip>\n\t   \t\t\n\t \t\t</div>\n\t\t \t\t\n\t \t\t\n\t  \t\t\n\t  \t\t<div class="uip-max-w-100p uip-overflow-auto uip-borde uip-border-round uip-margin-bottom-s">\n          \n          <div class="uip-position-relative">\n            <div class="uip-ajax-loader" v-if="loading && !initialLoading">\n              <div class="uip-loader-bar"></div>\n            </div>\n          </div>\n\t\t\t\t\n\t\t\t\t\t<table v-if="returnTableData.length > 0" class="uip-w-100p uip-border-collapse" style="min-width:900px">\n\t\t\t  \t\t<thead>\n\t\t\t\t  \t\t<tr class="uip-border-bottom uip-border-tp">\n\t\t\t\t\t  \t\t<th class="uip-text-left uip-w-28 uip-padding-xs uip-padding-left-s uip-padding-right-s"><input v-model="selectAll" class="uip-checkbox" type="checkbox"></th>\n\t\t\t\t\t  \t\t<th class="uip-text-left uip-text-weight-normal uip-text-muted uip-padding-xs uip-padding-left-s uip-padding-right">{{strings.name}}</th>\n\t\t\t\t\t  \t\t<th class="uip-text-left uip-text-weight-normal uip-text-muted uip-padding-xs uip-padding-left-s uip-padding-right">{{strings.status}}</th>\n\t\t\t\t\t  \t\t<th class="uip-text-left uip-text-weight-normal uip-text-muted uip-padding-xs uip-padding-left-s uip-padding-right">{{strings.forRoles}}</th>\n\t\t\t  \t\t  \t\t<th class="uip-text-left uip-text-weight-normal uip-text-muted uip-padding-xs uip-padding-left-s uip-padding-right">{{strings.excludes}}</th>\n\t\t\t\t\t  \t\t<th class="uip-text-left uip-text-weight-normal uip-text-muted uip-padding-xs uip-padding-left-s uip-padding-right">{{strings.modified}}</th>\n\t\t\t\t\t  \t\t<th class="uip-text-left uip-text-weight-normal uip-text-muted uip-padding-xs uip-padding-left-s uip-padding-right"></th>\n\t\t\t      \t\t</tr>\n\t\t\t\t\t\n\t\t\t\t\t\t</thead>\n\t\t  \t\t  <tbody v-if="!initialLoading">\n\t\t  \t\t  \n\t\t\t  \t\t  <template v-for="(item, index) in returnTableData">\n\t\t\t\t\t\t  <tr @mouseover="item.hover = true" @mouseleave="item.hover = false" class="uip-cursor-pointer hover:uip-background-muted" :class="{\'uip-border-bottom\' : index !== returnTableData.length - 1}">\n\t\t\t\t  \t\t  <td class="uip-padding-s "><input v-model="item.selected" class="uip-checkbox" type="checkbox"></td>\n\t\t\t\t  \t\t  <td class="uip-padding-s  uip-text-bold" @click="editLayout(item.id)">{{item.name}}</td>\n\t\t\t\t  \t\t  \n\t\t\t\t  \t\t  <td class="uip-padding-s">\n\t\t\t\t\t\t\t  <label class="uip-switch"><input type="checkbox" :checked="item.status == \'publish\'" @click="updateItemStatus(item)"><span class="uip-slider"></span></label>\n\t\t\t\t  \t\t  </td>\n\t\t\t\t  \t\t  <td class="uip-padding-s ">\n\t\t\t\t\t\t\t  <div class="uip-flex uip-flex-row uip-gap-xxs uip-row-gap-xxs uip-flex-wrap">\n\t\t\t\t\t  \t\t  <template v-for="user in item.for">\n\t\t\t\t\t\t\t\t  <div class="uip-padding-left-xxs uip-padding-right-xxs uip-background-primary-wash uip-border-round">{{user.name}}</div>\n\t\t\t\t\t  \t\t  </template>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t  \t\t  </td>\n\t\t\t\t  \t\t  <td class="uip-padding-s ">\n\t\t\t\t\t\t\t  <div class="uip-flex uip-flex-row uip-gap-xxs uip-row-gap-xxs uip-flex-wrap">\n\t\t\t\t\t  \t\t  <template v-for="user in item.excludes">\n\t\t\t\t\t\t\t\t  <div class="uip-padding-left-xxs uip-padding-right-xxs uip-background-primary-wash uip-border-round">{{user.name}}</div>\n\t\t\t\t\t  \t\t  </template>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t  \t\t  </td>\n\t\t\t\t  \t\t  <td class="uip-padding-s ">{{item.modified}}</td>\n\t\t\t\t  \t\t  <td class="uip-padding-s">\n                \n                  <drop-down dropPos="bottom-left">\n                  \n                    <template v-slot:trigger>\n                      <button class="uip-button-default uip-border-rounder uip-padding-xxs uip-icon">more_horiz</button>\n                    </template>\n                    \n                    <template v-slot:content>\n                      \n                      <div class="uip-padding-xs">\n                      \n                        <div class="uip-flex uip-flex-column">\n                        \n                          <div class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-link-default uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-rounder uip-flex-reverse uip-gap-m uip-flex-between" @click="editLayout(item.id)">\n                            <div class="uip-icon">edit</div>\n                            <div class="">{{strings.editTemplate}}</div>\n                          </div>\n                          \n                          <div class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-link-default uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-rounder uip-flex-reverse uip-gap-m uip-flex-between" @click="duplicateTemplate(item.id)">\n                            <div class="uip-icon">content_copy</div>\n                            <div class="">{{strings.duplicateTemplate}}</div>\n                          </div>\n                          \n                          <div class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-link-default uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-rounder uip-flex-reverse uip-gap-m uip-flex-between" @click="exportTemplate(item.id)">\n                            <div class="uip-icon">file_download</div>\n                            <div class="">{{strings.exportTemplate}}</div>\n                          </div>\n                          \n                        </div>\n                        \n                        <div class="uip-border-bottom uip-margin-top-xs uip-margin-bottom-xs"></div>\n                        \n                        <div class="uip-flex uip-flex-column">\n                        \n                          <div class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-link-danger uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-rounder uip-flex-reverse uip-gap-m uip-flex-between" @click="confirmDelete(item.id)">\n                            <div class="uip-icon">delete</div>\n                            <div class="">{{strings.deleteTemplate}}</div>\n                          </div>\n                          \n                        </div>\n                      </div>\n                      \n                      \n                    </template>\n                    \n                  </drop-down>\n              \n\t\t\t\t\t\t\t    \n\t\t\t\t  \t\t  </td>\n\t\t\t\t\t\t  </tr>\n\t\t\t  \t\t  </template>\n\t\t\t  \t\t  \n\t\t  \t\t  </tbody>\n\t\t\t\t\t</table>\n\t  \t\t</div>\n\t  \t\t<div v-if="initialLoading" class="uip-w-100p uip-flex uip-flex-center uip-flex-middle uip-h-600">\n\t\t\t\t<loading-chart></loading-chart>\n\t  \t\t</div>\n\t  \t\t<div class="uip-flex uip-flex-row uip-flex-between uip-flex-center">\n\t\t\t\t<div class="">{{totalFound + \' \' + strings.results}}</div>\n\t\t\t\t<div class="uip-flex uip-gap-xs uip-padding-xs" v-if="totalPages > 0">\n\t\t  \t\t<button @click="goBack" v-if="totalPages > 1" class="uip-button-default uip-icon uip-search-nav-button">chevron_left</button>\n\t\t  \t\t<button @click="goForward" v-if="page < totalPages" class="uip-button-default uip-icon uip-search-nav-button">chevron_right</button>\n\t\t\t\t</div>\n\t  \t\t</div>\n\t\t</template>\n    <a id="uip-menu-export" class="uip-hidden"></a>\n\t</div>'}};