export function moduleData(){return{props:{recipient:Object,closePanel:Function},inject:["appData","uipress"],data:function(){return{quillEditor:"",allRecipients:this.$route.params.recipients.split(","),showAllRecipients:!1,translations:this.appData.translations,message:{recipient:this.recipient,subject:"",message:"",replyTo:""}}},mounted:function(){this.startEditor()},computed:{rerturnRecipients(){return this.allRecipients}},methods:{startEditor(){let i=this.$refs.uipeditor;this.quillEditor=new Quill(i,{theme:"snow"})},removeRecipient(i){this.allRecipients.splice(i,1)},sendMessage(){let i=this;i.message.message=i.quillEditor.root.innerHTML;let e=new FormData;e.append("action","uip_send_message"),e.append("security",uip_ajax.security),e.append("allRecipients",JSON.stringify(i.rerturnRecipients)),e.append("message",JSON.stringify(i.message)),i.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{let n=e;n.error?i.uipress.notify(n.message,"","error"):(i.uipress.notify(n.message,"","success"),i.$router.push("/"))})}},template:'\n    \n    <floating-panel closeRoute="/">\n    \n      <div class="uip-flex uip-flex-grow uip-flex-column uip-max-h-100p" >\n      \n        <div class="uip-padding-m uip-border-bottom uip-flex uip-flex-column uip-row-gap-xs" >\n          <div class="uip-text-bold uip-text-xl">{{translations.newMessage}}</div>\n        </div>\n        \n        <div class="uip-padding-m uip-flex-grow uip-border-bottom uip-overflow-auto">\n          \n          <div class="uip-flex uip-flex-column uip-row-gap-s">\n            <div class="uip-flex uip-flex-column uip-flex-start">\n              <div class="uip-text-muted uip-margin-bottom-xs">{{translations.recipients}}</div>\n              \n              \n              <div v-if="rerturnRecipients.length > 2" class="uip-flex uip-flex-wrap uip-max-h-280 uip-overflow-auto uip-margin-left-xxs uip-flex-center uip-margin-bottom-xs uip-overflow-visible" @click="showAllRecipients = !showAllRecipients">\n                <template v-for="(item, index) in rerturnRecipients">\n                  <div v-if="index < 10" class="uip-w-20 uip-ratio-1-1 uip-text-s uip-background-primary-wash uip-border-circle uip-border-match uip-text-capitalize \n                  uip-text-center uip-line-height-1 uip-text-center uip-flex uip-flex-center uip-flex-middle uip-margin-left--8">\n                    <uip-tooltip :message="item" :delay="50">\n                      <span class="uip-link-default">{{item[0]}}</span>\n                    </uip-tooltip>  \n                  </div>\n                  \n                  <div v-else-if="index < 11" class="uip-link-muted uip-text-s uip-margin-left-xs">+{{rerturnRecipients.length - 10}} {{translations.others}}</div>\n                </template>\n              </div>\n              \n              \n              <div v-if="showAllRecipients || rerturnRecipients.length < 3" class="uip-flex uip-flex-wrap uip-gap-xxs uip-row-gap-xxs uip-max-h-280 uip-overflow-auto">\n                <template v-for="(item, index) in rerturnRecipients">\n                  <div class="uip-background-primary-wash uip-border-round uip-padding-xxs uip-text-bold uip-flex uip-gap-xxs uip-flex-center">\n                    {{item}}\n                    <span class="uip-icon uip-link-muted uip-cursor-icon" @click="removeRecipient(index)">cancel</span>\n                  </div>\n                </template>\n              </div>\n            </div>\n            <div class="">\n              <div class="uip-text-muted uip-margin-bottom-xs">{{translations.replyTo}}</div>\n              <input type="email" class="uip-input uip-w-100p" v-model="message.replyTo">\n            </div>\n            <div class="">\n              <div class="uip-text-muted uip-margin-bottom-xs">{{translations.subject}}</div>\n              <input type="email" class="uip-input uip-w-100p" v-model="message.subject">\n            </div>\n            <div class="">\n              <div class="uip-text-muted uip-margin-bottom-xs">{{translations.message}}</div>\n              <div ref="uipeditor"></div>\n            </div>\n            \n          </div>\n        </div>\n        \n        <div class="uip-padding-m uip-flex uip-flex-between">\n        \n          <router-link to="/" class="uip-button-default uip-no-underline">{{translations.cancel}}</router-link>\n          <button class="uip-button-primary uip-flex uip-gap-xs uip-flex-center uip-flex-center" @click="sendMessage()">\n          \n            <span class="uip-icon uip-text-">send</span>\n            <span>{{translations.sendMessage}}</span>\n            \n          </button>\n        </div>\n      \n      </div>\n    </floating-panel>\n      '}};