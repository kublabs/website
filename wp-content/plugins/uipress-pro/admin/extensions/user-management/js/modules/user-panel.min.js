var uipMediaUploader;export function moduleData(){return{props:{closePanel:Function,sendmessage:Function,groups:Object},inject:["appData","uipress"],data:function(){return{userID:this.$route.params.id,panelData:[],userFetched:!1,translations:this.appData.translations,recentActivity:{page:1,totalPages:0},user:{editData:[]},ui:{editing:!1,activityOpen:!0,pageViewsOpen:!0,userNotesOpen:!0}}},mounted:function(){this.getUserData(),this.$route.params.id&&void 0!==this.$route.params.id||this.$router.push("/")},computed:{},methods:{editUser(){this.$router.push("/users/"+this.userID+"/edit")},getUserData(){let i=this;jQuery.ajax({url:uip_user_app_ajax.ajax_url,type:"post",data:{action:"uip_get_user_data",security:uip_user_app_ajax.security,userID:i.userID,activityPage:i.recentActivity.page},success:function(e){let n=JSON.parse(e);n.error?uipNotification(n.error,{pos:"bottom-left",status:"danger"}):(i.panelData=n,i.userFetched=!0,i.recentActivity.totalPages=i.panelData.history.totalPages,i.user.editData=JSON.parse(JSON.stringify(i.panelData.user)))}})},sendPasswordReset(){let i=this,e=new FormData;e.append("action","uip_reset_password"),e.append("security",uip_ajax.security),e.append("userID",i.panelData.user.user_id),i.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{let n=e;n.error?i.uipress.notify(n.message,"","error"):i.uipress.notify(n.message,"","success")})},deleteUser(){let i=this;if(!confirm(i.translations.confirmUserDelete))return;let e=new FormData;e.append("action","uip_delete_user"),e.append("security",uip_ajax.security),e.append("userID",i.panelData.user.user_id),i.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{let n=e;n.error?i.uipress.notify(n.message,"","error"):(i.uipress.notify(n.message,"","success"),i.appData.refreshTable(),i.$router.push("/"))})},logoutEverywhere(){let i=this,e=new FormData;e.append("action","uip_logout_user_everywhere"),e.append("security",uip_ajax.security),e.append("userID",i.panelData.user.user_id),i.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{let n=e;n.error?i.uipress.notify(n.message,"","error"):i.uipress.notify(n.message,"","success")})},changePage(i){"next"==i&&(this.recentActivity.page+=1),"previous"==i&&(this.recentActivity.page=this.recentActivity.page-1),this.getUserData()},returnViewTitle:i=>i.title?i.title:i.url,returnRoles(i){this.user.editData.roles=i},returnGroups(i){this.user.editData.uip_user_group=i},sendUserMessage(){this.closePanel(),this.sendmessage(this.user.editData)}},template:' \n      <floating-panel closeRoute="/" v-if="userFetched">\n        \n        \n        <div class="uip-flex uip-flex-grow uip-flex-column uip-max-h-100p">\n        \n        \n          <div class="uip-padding-m uip-padding-top-s uip-padding-bottom-s uip-border-bottom uip-flex uip-flex-column uip-row-gap-xs" >\n            \n            \x3c!-- OVERVIEW --\x3e\n            <div class="uip-flex uip-flex-center uip-gap-s">\n              <div class="">\n                <img :src="panelData.user.image" class="uip-border-circle uip-h-50 uip-w-50">\n              </div>\n              <div class="uip-flex uip-flex-column uip-row-gap-xs">\n                <div class="uip-text-bold uip-text-xl">{{panelData.user.username}}</div>\n                <div class="uip-flex uip-gap-xs">\n                  <router-link :to="\'/roles/edit/\' + role" v-for="role in panelData.user.roles" \n                  class="uip-background-primary-wash uip-border-round uip-padding-left-xxs uip-padding-right-xxs uip-text-bold uip-link-default uip-no-underline uip-text-s">\n                    {{role}}\n                  </router-link>\n                </div>\n              </div>\n            </div>\n            \n          </div>\n          \n          \n          \n          <div class="uip-padding-m uip-flex uip-flex-grow uip-flex-column uip-max-h-100p uip-overflow-auto">\n            \n            \n            \n            <div class="uip-flex uip-flex-center uip-margin-bottom-s uip-background-muted uip-border-rounded uip-padding-xs uip-border-round uip-flex-between">\n              <div class="uip-text-m uip-text-bold uip-flex-grow">{{translations.details}}</div>\n              <div>\n                <drop-down dropPos="left">\n                  <template v-slot:trigger>\n                    <div class="uip-icon uip-link-default uip-padding-xxs hover:uip-background-grey uip-border-round uip-text-l">more_vert</div>\n                  </template>\n                  <template v-slot:content>\n                  \n                    <div class="uip-flex uip-flex-column">\n                      <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs uip-border-bottom">\n                        <div class="uip-flex uip-gap-xs uip-border-round uip-link-default hover:uip-background-muted uip-padding-xxs uip-flex-center" @click="editUser()">\n                          <div class="uip-icon">edit</div>\n                          <div>{{translations.editUser}}</div>\n                        </div>\n                        <div class="uip-flex uip-gap-xs uip-border-round uip-link-default hover:uip-background-muted uip-padding-xxs uip-flex-center" @click="sendPasswordReset()">\n                          <div class="uip-icon">lock</div>\n                          <div>{{translations.sendPasswordReset}}</div>\n                        </div>\n                        <router-link :to="\'/message/\' + panelData.user.user_email" class="uip-flex uip-gap-xs uip-border-round uip-link-default uip-no-underline hover:uip-background-muted uip-padding-xxs uip-flex-center">\n                          <div class="uip-icon">mail</div>\n                          <div>{{translations.sendMessage}}</div>\n                        </router-link>\n                        <div class="uip-flex uip-gap-xs uip-border-round uip-link-default hover:uip-background-muted uip-padding-xxs uip-flex-center" @click="logoutEverywhere()">\n                          <div class="uip-icon">logout</div>\n                          <div>{{translations.logoutEverywhere}}</div>\n                        </div>\n                      </div>\n                      <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs">\n                        <div class="uip-flex uip-gap-xs uip-border-round uip-link-danger hover:uip-background-muted uip-padding-xxs uip-flex-center" @click="deleteUser()">\n                          <div class="uip-icon">delete</div>\n                          <div>{{translations.deleteUser}}</div>\n                        </div>\n                      </div>\n                      \n                    </div>\n                  </template>\n                </drop-down>\n              </div>\n            </div>\n            \n            \n            <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-s uip-margin-bottom-s">\n              <div class="uip-flex uip-gap-xs uip-flex-center">\n                <div class="uip-icon uip-text-muted uip-text-l">badge</div>\n                <div class="uip-flex-grow">{{translations.name}}</div>\n                <div class="">{{panelData.user.name}}</div>\n              </div>\n              <div class="uip-flex uip-gap-xs uip-flex-center">\n                <div class="uip-icon uip-text-muted uip-text-l">mail</div>\n                <div class="uip-flex-grow">{{translations.email}}</div>\n                <div class="">{{panelData.user.user_email}}</div>\n              </div>\n              <div class="uip-flex uip-gap-xs uip-flex-center">\n                <div class="uip-icon uip-text-muted uip-text-l">add_circle</div>\n                <div class="uip-flex-grow">{{translations.accountCreated}}</div>\n                <div class="">{{panelData.user.user_registered}}</div>\n              </div>\n              <div class="uip-flex uip-gap-xs uip-flex-center">\n                <div class="uip-icon uip-text-muted uip-text-l">login</div>\n                <div class="uip-flex-grow">{{translations.lastLogin}}</div>\n                <div class="">{{panelData.user.uip_last_login_date}}</div>\n              </div>\n              <div class="uip-flex uip-gap-xs uip-flex-center">\n                <div class="uip-icon uip-text-muted uip-text-l">public</div>\n                <div class="uip-flex-grow">{{translations.lastLoginCountry}}</div>\n                <div class="">{{panelData.user.uip_last_login_country}}</div>\n              </div>\n              <div class="uip-flex uip-gap-xs uip-flex-center">\n                <div class="uip-icon uip-text-muted uip-text-l">article</div>\n                <div class="uip-flex-grow">{{translations.totalPosts}}</div>\n                <div class="">{{panelData.user.totalPosts}}</div>\n              </div>\n              <div class="uip-flex uip-gap-xs uip-flex-center">\n                <div class="uip-icon uip-text-muted uip-text-l">comment</div>\n                <div class="uip-flex-grow">{{translations.totalComments}}</div>\n                <div class="">{{panelData.user.totalComments}}</div>\n              </div>\n            </div>\n            \n            \n            \x3c!-- USER NOTES --\x3e\n            <div class="uip-flex uip-flex-middle uip-flex-center uip-flex-between uip-margin-bottom-s uip-background-muted uip-border-rounded uip-padding-xs uip-border-round" v-if="panelData.user.notes != \'\'">\n              <div class="uip-flex uip-gap-xs">\n                <div class="uip-text-m uip-text-bold uip-flex-grow">{{translations.userNotes}}</div>\n              </div>\n              <div @click="ui.userNotesOpen = !ui.userNotesOpen ">\n                <div v-if="ui.userNotesOpen == true" class="uip-background-muted uip-border-round hover:uip-background-grey uip-cursor-pointer uip-icon uip-padding-xxs" type="button">expand_more</div>\n                <div v-if="ui.userNotesOpen == false" class="uip-background-muted uip-border-round hover:uip-background-grey uip-cursor-pointer uip-icon uip-padding-xxs" type="button">chevron_left</div>\n              </div>\n            </div>\n            <div v-if="ui.userNotesOpen == true && panelData.user.notes != \'\'" class="uip-padding-xs uip-flex uip-flex-column uip-margin-bottom-s">\n              <div v-html="panelData.user.notes"></div>\n            </div>\n            \n            \n            \x3c!-- RECENT PAGE VIEWS --\x3e\n            <div class="uip-flex uip-flex-middle uip-flex-center uip-flex-between uip-margin-bottom-s uip-background-muted uip-border-rounded uip-padding-xs uip-border-round">\n              <div class="uip-flex uip-gap-xs">\n                <div class="uip-text-m uip-text-bold uip-flex-grow">{{translations.recentPageViews}}</div>\n              </div>\n              <div @click="ui.pageViewsOpen = !ui.pageViewsOpen ">\n                <div v-if="ui.pageViewsOpen == true" class="uip-background-muted uip-border-round hover:uip-background-grey uip-cursor-pointer uip-icon uip-padding-xxs" type="button">expand_more</div>\n                <div v-if="ui.pageViewsOpen == false" class="uip-background-muted uip-border-round hover:uip-background-grey uip-cursor-pointer uip-icon uip-padding-xxs" type="button">chevron_left</div>\n              </div>\n            </div>\n            <div v-if="ui.pageViewsOpen" class="uip-padding-xs uip-flex uip-flex-column uip-margin-bottom-s">\n              <div v-if="panelData.recentPageViews.length == 0">{{translations.noActivity}}</div>\n              \n              <table class="uip-border-collapse">\n                <tbody>\n                  <tr v-for="(view, index) in panelData.recentPageViews">\n                  \n                    <td class="uip-no-wrap uip-text-right uip-vertical-align-top">\n                      <div class="uip-text-muted  uip-text-s">{{view.human_time}}</div>\n                    </td>\n                    \n                    \n                    <td class="uip-h-12 uip-w-12 uip-no-wrap uip-padding-left-m uip-padding-right-m uip-padding-top-xs">\n                      <div class="uip-h-100p uip-position-relative uip-flex uip-flex-column uip-flex-center uip-row-gap-xs">\n                      \n                        <div class="uip-w-4 uip-h-4 uip-border-circle uip-background-primary"></div>\n                        \n                        <div v-if="index != panelData.recentPageViews.length - 1" class="uip-background-muted uip-w-2 uip-flex uip-flex-middle uip-overflow-visible uip-flex-grow uip-flex-start">\n                          \n                        </div>\n                      </div>\n                    </td>\n                    \n                    <td class="uip-w-90p uip-padding-bottom-s uip-vertical-align-top">\n                      <a class="uip-link-muted uip-text-bold uip-text-normal uip-no-underline" :href="view.url">{{returnViewTitle(view)}}</a>\n                    </td>\n                  \n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            \n            \n            \n            \x3c!-- Activity Log --\x3e\n            <div class="uip-flex uip-flex-column">\n            \n              <div @click="ui.activityOpen = !ui.activityOpen" \n              class="uip-flex uip-flex-middle uip-flex-center uip-flex-between uip-margin-bottom-s uip-background-muted uip-border-rounded uip-padding-xs uip-border-round uip-cursor-pointer hover:uip-background-grey ">\n                <div class="uip-flex uip-gap-xs">\n                  <div class="uip-text-m uip-text-bold uip-flex-grow">{{translations.recentActivity}}</div>\n                  <div class="uip-text-muted">{{panelData.history.totalFound}}</div>\n                </div>\n                <div>\n                  <div v-if="ui.activityOpen == true" class="uip-background-muted uip-border-round hover:uip-background-grey uip-cursor-pointer uip-icon uip-padding-xxs" type="button">expand_more</div>\n                  <div v-if="ui.activityOpen == false" class="uip-background-muted uip-border-round hover:uip-background-grey uip-cursor-pointer uip-icon uip-padding-xxs" type="button">chevron_left</div>\n                </div>\n              </div>\n              \n              <div v-if="ui.activityOpen == true" class="uip-padding-xs uip-flex uip-flex-column">\n                <div v-if="panelData.history.totalFound == 0">{{translations.noActivity}}</div>\n                \n                <table class="uip-border-collapse">\n                  <tbody>\n                    <tr v-for="(view, index) in panelData.history.list">\n                    \n                      <td class="uip-no-wrap uip-text-right uip-vertical-align-top">\n                        <div class="uip-text-muted  uip-text-s">{{view.human_time}}</div>\n                      </td>\n                      \n                      <td class="uip-h-12 uip-w-12 uip-no-wrap uip-padding-left-m uip-padding-right-m uip-padding-top-xs">\n                        <div class="uip-h-100p uip-position-relative uip-flex uip-flex-column uip-flex-center uip-row-gap-xs">\n                        \n                          <div class="uip-w-4 uip-h-4 uip-border-circle"\n                          :class="[{\'uip-background-primary\' : view.type == \'primary\'}, {\'uip-background-orange\' : view.type == \'warning\'}, {\'uip-background-red\' : view.type == \'danger\'}]"></div>\n                          \n                          <div v-if="index != panelData.history.list.length - 1" class="uip-background-muted uip-w-2 uip-flex uip-flex-middle uip-overflow-visible uip-flex-grow uip-flex-start">\n                            \n                          </div>\n                        </div>\n                      </td>\n                      \n                      <td class="uip-w-90p">\n                        <div class="uip-padding-bottom-xs">\n                          <div class="uip-text-bold uip-text-normal uip-no-underline" >{{view.title}}</div>\n                          <div class="uip-text-muted" v-html="view.meta"></div>\n                          <div class="uip-flex uip-gap-xxs" >\n                            <template v-for="link in view.links">\n                              <a :href="link.url" class="uip-link-muted uip-link-no-underline">{{link.name}}</a>\n                            </template>\n                          </div>\n                        </div>\n                      </td>\n                    \n                    </tr>\n                  </tbody>\n                </table>\n                \n                \n              </div>\n              \n              <div class="uip-flex uip-gap-xs uip-margin-top-s" v-if="recentActivity.totalPages > 1">\n                <button v-if="recentActivity.page > 1" class="uip-button-default" @click="changePage(\'previous\')">{{translations.previous}}</button>\n                <button class="uip-button-default" @click="changePage(\'next\')">{{translations.next}}</button>\n              </div>\n            \n            </div>\n            \n          </div>\n          \n        </div>\n      </floating-panel>'}};